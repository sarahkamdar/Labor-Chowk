<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labour Chowk</title>
    <link rel="stylesheet" href="./CSS files/dashboard-styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktaGFtbWVyIiB2aWV3Ym94PSIwIDAgMTYgMTYiPjxwYXRoIGQ9Ik05Ljk3MiAyLjUwOGEuNS41IDAgMCAwLS4xNi0uNTU2bC0uMTc4LS4xMjlhNSA1IDAgMCAwLTIuMDc2LS43ODNDNi4yMTUuODYyIDQuNTA0IDEuMjI5IDIuODQgMy4xMzNIMS43ODZhLjUuNSAwIDAgMC0uMzU0LjE0N0wuMTQ2IDQuNTY3YS41LjUgMCAwIDAgMCAuNzA2bDIuNTcxIDIuNTc5YS41LjUgMCAwIDAgLjcwOCAwbDEuMjg2LTEuMjlhLjUuNSAwIDAgMCAuMTQ2LS4zNTNWNS41N2w4LjM4NyA4Ljg3M0EuNS41IDAgMCAwIDE0IDE0LjVsMS41LTEuNWEuNS41IDAgMCAwIC4wMTctLjY4OWwtOS4xMjktOC42M2MuNzQ3LS40NTYgMS43NzItLjgzOSAzLjExMi0uODM5YS41LjUgMCAwIDAgLjQ3Mi0uMzM0Ii8+PC9zdmc+" alt="Hammer Icon" class="bi bi-hammer">
            <h1>Labour <span class="chowk">Chowk</span></h1>
        </div>
        <div class="nav-links">
            <a href="#" class="active">HOME</a>
            <a href="#">ABOUT US</a>
            <a href="#">OUR CUSTOMERS</a>
            <a href="#">CONTACT US</a>
        </div>
        <div class="nav-right">
            <div class="search-box">
                <input type="text" placeholder="Enter text...">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktc2VhcmNoIiB2aWV3Ym94PSIwIDAgMTYgMTYiPjxwYXRoIGQ9Ik0xMS43NDIgMTAuMzQ0YTYuNSA2LjUgMCAxIDAtMS4zOTcgMS4zOThoLS4wMDFxLjA0NC4wNi4wOTguMTE1bDMuODUgMy44NWExIDEgMCAwIDAgMS40MTUtMS40MTRsLTMuODUtMy44NWExIDEgMCAwIDAtLjExNS0uMXpNMTIgNi41YTUuNSA1LjUgMCAxIDEtMTEgMCA1LjUgNS41IDAgMCAxIDExIDB6Ii8+PC9zdmc+" alt="Search" class="bi bi-search">
            </div>
            <button class="sign-out">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYm94LWFycm93LXJpZ2h0IiB2aWV3Ym94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEwIDEyLjVhLjUuNSAwIDAgMS0uNS41aC04YS41LjUgMCAwIDEtLjUtLjV2LTlhLjUuNSAwIDAgMSAuNS0uNWg4YS41LjUgMCAwIDEgLjUuNXYyYS41LjUgMCAwIDAgMSAwdi0yQTEuNSAxLjUgMCAwIDAgOS41IDJoLThBMS41IDEuNSAwIDAgMCAwIDMuNXY5QTEuNSAxLjUgMCAwIDAgMS41IDE0aDhhMS41IDEuNSAwIDAgMCAxLjUtMS41di0yYS41LjUgMCAwIDAtMSAweiIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE1Ljg1NCA4LjM1NGEuNS41IDAgMCAwIDAtLjcwOGwtMy0zYS41LjUgMCAwIDAtLjcwOC43MDhMMTQuMjkzIDcuNUg1LjVhLjUuNSAwIDAgMCAwIDFoOC43OTNsLTIuMTQ3IDIuMTQ2YS41LjUgMCAwIDAgLjcwOC43MDh6Ii8+PC9zdmc+" alt="Sign Out" class="bi bi-box-arrow-right">
                Sign Out
            </button>
        </div>
    </nav>

    <main class="dashboard">
        <div class="content">
            <div class="user-info">
                <div class="user-details">
                    <h2>SHUBHAM JAIN</h2>
                    <p>6354916178</p>
                </div>
            </div>
            
            <h2 class="section-title">Workers near you</h2>
            
            <div class="workers-grid">
                <div class="worker-card">
                    <img src="./Pictures/labour1.jpg" alt="Worker" class="worker-img">
                    <h3>Ram Das</h3>
                    <p class="occupation">Carpenter</p>
                    <div class="worker-details">
                        <p>WAGE : ₹ 400</p>
                        <p>PIN : 201304</p>
                        <p>PH. NUMBER : +91 8700731873</p>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                </div>

                <div class="worker-card">
                    <img src="./Pictures/labour2.jpg" alt="Worker" class="worker-img">
                    <h3>Sarukh Mishra</h3>
                    <p class="occupation">Electrician</p>
                    <div class="worker-details">
                        <p>WAGE : ₹ 600</p>
                        <p>PIN : 201304</p>
                        <p>PH. NUMBER : +91 8700731872</p>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                </div>

                <div class="worker-card">
                    <img src="./Pictures/labour3.jpg" alt="Worker" class="worker-img">
                    <h3>ANKIT JHA</h3>
                    <p class="occupation">Painter</p>
                    <div class="worker-details">
                        <p>WAGE : ₹ 499</p>
                        <p>PIN : 201304</p>
                        <p>PH. NUMBER : +91 4700731873</p>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                </div>

                <div class="worker-card">
                    <img src="./Pictures/labour4.jpg" alt="Worker" class="worker-img">
                    <h3>ANKIT JHA</h3>
                    <p class="occupation">Gardener</p>
                    <div class="worker-details">
                        <p>WAGE : ₹ 500</p>
                        <p>PIN : 201304</p>
                        <p>PH. NUMBER : +91 9000731873</p>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                </div>

                <div class="worker-card">
                    <img src="./Pictures/labour5.jpg" alt="Worker" class="worker-img">
                    <h3>ANKIT JHA</h3>
                    <p class="occupation">Plumber</p>
                    <div class="worker-details">
                        <p>WAGE : ₹ 500</p>
                        <p>PIN : 201304</p>
                        <p>PH. NUMBER : +91 8700731772</p>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-left">
                <h2>Labour <span class="chowk">Chowk</span></h2>
                <p>Labour Chowk is a Non-Profit Organization that provides Workers exposure and opportunities to get work at justified prices and get out of unnecessary competition in market. Also we aim to provide verified Workers to customer at convinent rate and save their precious time.</p>
                <div class="social-icons">
                    <a href="#"><img src="/api/placeholder/24/24" alt="Facebook"></a>
                    <a href="#"><img src="/api/placeholder/24/24" alt="WhatsApp"></a>
                    <a href="#"><img src="/api/placeholder/24/24" alt="Instagram"></a>
                    <a href="#"><img src="/api/placeholder/24/24" alt="Gmail"></a>
                    <a href="#"><img src="/api/placeholder/24/24" alt="GitHub"></a>
                </div>
            </div>
            <div class="footer-right">
                <h3>Contact Us</h3>
                <p>NIT Jalandhar, G.T. Road, Amritsar Bye-Pass, Jalandhar (Punjab), India</p>
                <p>+91-8651484067</p>
                <p>chowklabours@gmail.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>The_Optimizers, © 2022 All Rights Reserved</p>
        </div>
    </footer>

    // Add this script to your home.html
    <script>
    // Function to handle sign out
    async function handleSignOut() {
        try {
            const response = await fetch('/logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            
            if (response.ok) {
                localStorage.removeItem('token');
                window.location.href = '/';
            }
        } catch (error) {
            console.error('Error signing out:', error);
        }
    }
    
    // Prevent back navigation after logout
    window.addEventListener('popstate', async function(event) {
        try {
            const response = await fetch('/check-auth');
            if (!response.ok) {
                window.location.href = '/';
            }
        } catch (error) {
            window.location.href = '/';
        }
    });
    
    // Add click event listener to sign out button
    document.addEventListener('DOMContentLoaded', function() {
        const signOutBtn = document.querySelector('.nav-right img[alt="Sign Out"]').parentElement;
        signOutBtn.style.cursor = 'pointer';
        signOutBtn.addEventListener('click', handleSignOut);
    });
    
    // Check authentication on page load
    async function checkAuth() {
        try {
            const response = await fetch('/check-auth');
            if (!response.ok) {
                window.location.href = '/';
            }
        } catch (error) {
            window.location.href = '/';
        }
    }
    
    checkAuth();
    </script>

</body>
</html>

